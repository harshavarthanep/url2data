<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Extractor | H24 Creationz Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Zen / Stealth Theme Customization */
        :root {
            --bg-body: #0a0a0a;
            --bg-card: #171717;
            --bg-input: #262626;
            --accent: #10b981; /* Emerald Green */
            --text-main: #e5e5e5;
            --text-muted: #a3a3a3;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        /* Custom Scrollbar for 'Stealth' look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-body);
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Utility classes */
        .glass-panel {
            background: rgba(23, 23, 23, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .input-zen {
            background: var(--bg-input);
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .input-zen:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 1px var(--accent);
        }

        .btn-zen {
            transition: transform 0.1s ease, filter 0.2s ease;
        }
        .btn-zen:active {
            transform: scale(0.98);
        }

        /* Toast Animation */
        @keyframes slideIn {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .toast {
            animation: slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="h-16 border-b border-neutral-800 flex items-center justify-between px-6 glass-panel z-20">
        <div class="flex items-center gap-3">
            <div class="w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"></div>
            <h1 class="font-medium tracking-wide text-lg">Batch URL Extractor</h1>
        </div>
        <div class="flex gap-3">
            <button onclick="exportToCSV()" class="btn-zen flex items-center gap-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-md text-sm border border-neutral-700">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                Export CSV
            </button>
            <button onclick="toggleSettings()" class="btn-zen p-2 hover:bg-neutral-800 rounded-md text-neutral-400 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        
        <aside class="w-1/3 min-w-[320px] max-w-[500px] border-r border-neutral-800 bg-[#0f0f0f] flex flex-col p-6 z-10 shadow-xl">
            <h2 class="text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4">Input URLs</h2>
            <div class="relative flex-1">
                <textarea id="urlInput" class="w-full h-full input-zen rounded-lg p-4 text-sm text-neutral-300 resize-none font-mono" placeholder="Paste links here...&#10;https://example.com&#10;www.anotherone.io"></textarea>
                <div class="absolute bottom-4 right-4">
                    <button onclick="processURLs()" class="btn-zen bg-emerald-600 hover:bg-emerald-500 text-white p-3 rounded-full shadow-lg shadow-emerald-900/50">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
                    </button>
                </div>
            </div>
            <p class="text-xs text-neutral-600 mt-3">Supports raw text. We'll find the links automatically.</p>
        </aside>

        <main class="flex-1 bg-neutral-900/50 relative flex flex-col">
            <div class="p-6 border-b border-neutral-800 flex justify-between items-center bg-[#0a0a0a]">
                <h2 class="text-sm font-semibold text-neutral-400 uppercase tracking-wider">Extracted Data (<span id="count">0</span>)</h2>
                <div class="flex gap-2 text-xs">
                    <span class="flex items-center gap-1 text-neutral-500"><div class="w-2 h-2 rounded-full bg-blue-500"></div> Name</span>
                    <span class="flex items-center gap-1 text-neutral-500"><div class="w-2 h-2 rounded-full bg-purple-500"></div> Industry</span>
                </div>
            </div>

            <div id="resultsList" class="flex-1 overflow-y-auto p-6 space-y-3">
                <div id="emptyState" class="h-full flex flex-col items-center justify-center text-neutral-600">
                    <svg class="mb-4 opacity-20" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    <p>No data yet. Paste URLs on the left to begin.</p>
                </div>
            </div>
        </main>
    </div>

    <div id="settingsPanel" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="bg-[#171717] border border-neutral-800 rounded-xl p-8 max-w-sm w-full shadow-2xl">
            <h3 class="text-lg font-medium mb-6">Settings</h3>
            
            <div class="space-y-4">
                <button onclick="clearCache()" class="w-full btn-zen py-3 px-4 bg-red-900/20 text-red-400 hover:bg-red-900/40 border border-red-900/50 rounded-lg flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    Clear All Cached Data
                </button>
                <button onclick="toggleSettings()" class="w-full btn-zen py-3 px-4 bg-neutral-800 text-neutral-300 hover:bg-neutral-700 rounded-lg">
                    Close
                </button>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-6 right-6 bg-emerald-600 text-white px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg>
        <span id="toastMsg">Copied!</span>
    </div>

    <script>
        // --- State Management ---
        let sites = JSON.parse(localStorage.getItem('h24_extractor_data') || '[]');

        // --- Keywords for Industry Guessing ---
        const industryKeywords = {
            'tech': ['soft', 'tech', 'app', 'io', 'ai', 'cyber', 'code', 'data', 'sys', 'web', 'dev'],
            'healthcare': ['med', 'health', 'clinic', 'doc', 'pharm', 'bio', 'care', 'hosp', 'dental'],
            'ecommerce': ['shop', 'store', 'cart', 'buy', 'mart', 'retail', 'sale'],
            'finance': ['bank', 'pay', 'fin', 'money', 'invest', 'capital', 'fund', 'coin', 'crypto'],
            'education': ['edu', 'learn', 'school', 'univ', 'academ', 'course', 'study', 'tutor'],
            'realestate': ['estate', 'home', 'house', 'prop', 'realty', 'land'],
            'agency': ['agency', 'media', 'creative', 'design', 'studio', 'brand', 'market']
        };

        // --- Core Functions ---

        function init() {
            renderList();
        }

        function processURLs() {
            const input = document.getElementById('urlInput').value;
            if (!input.trim()) return;

            // Regex to find URLs in text
            const urlRegex = /(https?:\/\/[^\s]+)|(www\.[^\s]+)|([a-zA-Z0-9-]+\.[a-zA-Z]{2,})/g;
            const foundMatches = input.match(urlRegex) || [];

            // Process each match
            foundMatches.forEach(rawUrl => {
                let cleanUrl = rawUrl;
                if (!cleanUrl.startsWith('http')) cleanUrl = 'https://' + cleanUrl;

                try {
                    const urlObj = new URL(cleanUrl);
                    const hostname = urlObj.hostname.replace(/^www\./, '');
                    
                    // Check if already exists to prevent duplicates
                    if (sites.some(s => s.domain === hostname)) return;

                    // 1. Extract Name
                    const namePart = hostname.split('.')[0];
                    const name = namePart.charAt(0).toUpperCase() + namePart.slice(1);

                    // 2. Guess Industry
                    let industry = 'General';
                    for (const [key, words] of Object.entries(industryKeywords)) {
                        if (words.some(w => hostname.includes(w))) {
                            industry = key.charAt(0).toUpperCase() + key.slice(1);
                            break;
                        }
                    }

                    sites.unshift({
                        id: Date.now() + Math.random(),
                        url: cleanUrl,
                        domain: hostname,
                        name: name,
                        industry: industry
                    });

                } catch (e) {
                    console.log('Invalid URL skipped:', rawUrl);
                }
            });

            saveData();
            renderList();
            document.getElementById('urlInput').value = ''; // Clear input
            showToast(`${foundMatches.length} URLs processed`);
        }

        function saveData() {
            localStorage.setItem('h24_extractor_data', JSON.stringify(sites));
        }

        function clearCache() {
            sites = [];
            localStorage.removeItem('h24_extractor_data');
            renderList();
            toggleSettings();
            showToast('Cache Cleared');
        }

        function deleteItem(id) {
            sites = sites.filter(s => s.id !== id);
            saveData();
            renderList();
        }

        function updateItem(id, field, value) {
            const item = sites.find(s => s.id === id);
            if (item) {
                item[field] = value;
                saveData();
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast(`Copied: ${text}`);
            });
        }

        function exportToCSV() {
            if (sites.length === 0) {
                showToast('No data to export');
                return;
            }
            const headers = ['Website Name', 'Industry', 'Domain', 'Full URL'];
            const csvRows = [headers.join(',')];

            sites.forEach(site => {
                const row = [
                    `"${site.name}"`,
                    `"${site.industry}"`,
                    site.domain,
                    site.url
                ];
                csvRows.push(row.join(','));
            });

            const csvContent = "data:text/csv;charset=utf-8," + csvRows.join("\n");
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "website_data_export.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // --- UI Functions ---

        function renderList() {
            const listEl = document.getElementById('resultsList');
            const countEl = document.getElementById('count');
            const emptyState = document.getElementById('emptyState');

            countEl.innerText = sites.length;

            if (sites.length === 0) {
                listEl.innerHTML = '';
                listEl.appendChild(emptyState);
                emptyState.classList.remove('hidden');
                return;
            }

            // Keep empty state in DOM but hidden to avoid re-creation
            if(document.getElementById('emptyState')) document.getElementById('emptyState').classList.add('hidden');
            
            listEl.innerHTML = ''; // Clear current list

            sites.forEach(site => {
                const card = document.createElement('div');
                card.className = 'glass-panel p-4 rounded-lg flex items-center justify-between group hover:border-neutral-700 transition-colors';
                
                card.innerHTML = `
                    <div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 mr-4">
                        
                        <div class="flex flex-col gap-1">
                            <label class="text-[10px] uppercase tracking-wider text-blue-400 font-bold">Website Name</label>
                            <div class="flex items-center gap-2 bg-neutral-800/50 rounded px-2 py-1 border border-transparent focus-within:border-blue-500/50 transition-colors">
                                <input type="text" value="${site.name}" 
                                    onchange="updateItem(${site.id}, 'name', this.value)"
                                    class="bg-transparent border-none text-sm w-full focus:outline-none text-white font-medium" />
                                <button onclick="copyToClipboard('${site.name}')" class="text-neutral-500 hover:text-white" title="Copy Name">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                            </div>
                            <a href="${site.url}" target="_blank" class="text-xs text-neutral-600 hover:text-neutral-400 truncate max-w-[200px]">${site.domain}</a>
                        </div>

                        <div class="flex flex-col gap-1">
                            <label class="text-[10px] uppercase tracking-wider text-purple-400 font-bold">Industry</label>
                            <div class="flex items-center gap-2 bg-neutral-800/50 rounded px-2 py-1 border border-transparent focus-within:border-purple-500/50 transition-colors">
                                <input type="text" value="${site.industry}" 
                                    onchange="updateItem(${site.id}, 'industry', this.value)"
                                    class="bg-transparent border-none text-sm w-full focus:outline-none text-white font-medium" />
                                <button onclick="copyToClipboard('${site.industry}')" class="text-neutral-500 hover:text-white" title="Copy Industry">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                                </button>
                            </div>
                        </div>

                    </div>

                    <button onclick="deleteItem(${site.id})" class="text-neutral-600 hover:text-red-400 p-2 opacity-0 group-hover:opacity-100 transition-opacity">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    </button>
                `;
                listEl.appendChild(card);
            });
        }

        function toggleSettings() {
            const modal = document.getElementById('settingsPanel');
            modal.classList.toggle('hidden');
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMsg').innerText = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // Initialize
        init();

    </script>
</body>
</html>
